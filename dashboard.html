<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - INDICEIA</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <div class="loading-text" id="loadingText">Cargando...</div>
    </div>

    <!-- Toast container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Header -->
    <div class="header">
        <div class="logo">
            <div class="logo-icon">
                <i class="fas fa-robot"></i>
            </div>
            <h1>INDICEIA</h1>
        </div>
        <div class="user-info">
            <div class="user-avatar" id="userAvatar">U</div>
            <div class="user-details">
                <div class="user-name" id="userName">Usuario</div>
                <div class="user-email" id="userEmail">Cargando...</div>
            </div>
            <button class="btn-logout" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> Salir
            </button>
        </div>
    </div>

    <div class="container">
        <!-- Progress indicator -->
        <div class="progress-indicator">
            <div class="progress-header">
                <div class="progress-title">Configuración de tu IA Comercial</div>
                <div class="progress-subtitle">Completa todos los pasos para tener tu asistente listo</div>
            </div>
            <div class="completion-indicator">
                <div class="completion-bar">
                    <div class="completion-fill" id="completionFill"></div>
                </div>
                <div class="completion-text" id="completionText">0% completado</div>
            </div>
            <div class="progress-steps" id="progressSteps">
                <!-- Steps generados dinámicamente -->
            </div>
        </div>

        <!-- Main content -->
        <div class="main-content">
            <div class="tab-nav" id="tabNav">
                <!-- Tabs generados dinámicamente -->
            </div>

            <div class="tab-content" id="tabContent">
                <!-- Tab: Mi Comercio -->
                <div class="tab-pane active" id="comercio">
                    <div class="form-section">
                        <h3><i class="fas fa-crown"></i> Elige tu Plan</h3>
                        <div class="plan-selector" id="planSelector">
                            <!-- Planes generados dinámicamente -->
                        </div>
                    </div>

                    <form id="comercioForm" novalidate>
                        <div class="form-section">
                            <h3><i class="fas fa-info-circle"></i> Información Básica</h3>
                            <div class="form-fields" id="basicInfoFields">
                                <!-- Campos generados dinámicamente -->
                            </div>
                        </div>

                        <div class="form-section">
                            <h3><i class="fas fa-phone"></i> Contacto</h3>
                            <div class="form-fields" id="contactFields">
                                <!-- Campos generados dinámicamente -->
                            </div>
                        </div>

                        <div class="form-section">
                            <h3><i class="fas fa-credit-card"></i> Medios de Pago</h3>
                            <div class="checkbox-grid" id="paymentMethods">
                                <!-- Checkboxes generados dinámicamente -->
                            </div>
                        </div>

                        <div class="btn-group btn-group-end">
                            <button type="button" class="btn btn-secondary" id="resetForm">
                                <i class="fas fa-undo"></i> Limpiar
                            </button>
                            <button type="submit" class="btn btn-success btn-lg">
                                <i class="fas fa-save"></i> Guardar Información
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Tab: Horarios -->
                <div class="tab-pane" id="horarios">
                    <div class="form-section">
                        <h3><i class="fas fa-clock"></i> Horarios de Atención</h3>
                        <div class="schedule-grid" id="scheduleGrid">
                            <!-- Horarios generados dinámicamente -->
                        </div>
                        <div class="btn-group btn-group-end">
                            <button type="button" class="btn btn-primary btn-lg" id="saveSchedule">
                                <i class="fas fa-save"></i> Guardar Horarios
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Tab: Productos -->
                <div class="tab-pane" id="productos">
                    <!-- Categories management -->
                    <div class="form-section">
                        <h3><i class="fas fa-tags"></i> Categorías de Productos</h3>
                        <div class="category-input-group">
                            <input type="text" id="newCategory" placeholder="Nueva categoría...">
                            <button type="button" class="btn btn-success" id="addCategory">
                                <i class="fas fa-plus"></i> Agregar
                            </button>
                        </div>
                        <div class="categories-grid" id="categoriesGrid">
                            <!-- Categorías generadas dinámicamente -->
                        </div>
                    </div>
                    
                    <!-- Excel upload -->
                    <div class="form-section">
                        <h3><i class="fas fa-file-excel"></i> Carga Masiva de Productos</h3>
                        <div class="file-upload" id="fileUpload">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <h3>Cargar Excel de Productos</h3>
                            <p>Arrastra tu archivo Excel aquí o haz click para seleccionar</p>
                            <button type="button" class="btn btn-outline">
                                <i class="fas fa-folder-open"></i> Seleccionar archivo
                            </button>
                            <input type="file" id="excelFile" accept=".xlsx,.xls,.csv" style="display: none;">
                        </div>
                    </div>

                    <!-- Product form -->
                    <div class="form-section">
                        <h3><i class="fas fa-plus"></i> Agregar Producto Manual</h3>
                        <div class="product-form">
                            <form id="productForm" novalidate>
                                <div class="form-fields" id="productFields">
                                    <!-- Campos generados dinámicamente -->
                                </div>
                                <div class="form-actions">
                                    <button type="button" class="btn btn-secondary" id="clearProduct">
                                        <i class="fas fa-eraser"></i> Limpiar
                                    </button>
                                    <button type="submit" class="btn btn-success">
                                        <i class="fas fa-plus"></i> Agregar Producto
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Products table -->
                    <div class="form-section">
                        <h3><i class="fas fa-list"></i> Lista de Productos</h3>
                        <div class="table-container">
                            <div class="table-header">
                                <div class="table-title">
                                    <i class="fas fa-box"></i> Productos Registrados
                                </div>
                                <div class="table-actions">
                                    <button class="btn btn-sm btn-secondary" id="exportProducts">
                                        <i class="fas fa-download"></i> Exportar
                                    </button>
                                    <button class="btn btn-sm btn-danger" id="clearProducts">
                                        <i class="fas fa-trash"></i> Limpiar Todo
                                    </button>
                                </div>
                            </div>
                            <table class="table" id="productsTable">
                                <thead id="productsTableHead">
                                    <!-- Headers generados dinámicamente -->
                                </thead>
                                <tbody id="productsTableBody">
                                    <!-- Filas generadas dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Tab: Mi IA -->
                <div class="tab-pane" id="ia">
                    <div class="form-section">
                        <h3><i class="fas fa-robot"></i> Configuración de tu IA</h3>
                        <form id="aiConfigForm" novalidate>
                            <div class="form-fields" id="aiConfigFields">
                                <!-- Campos generados dinámicamente -->
                            </div>
                            <div class="btn-group btn-group-end">
                                <button type="button" class="btn btn-secondary" id="previewAI">
                                    <i class="fas fa-eye"></i> Vista Previa
                                </button>
                                <button type="submit" class="btn btn-success btn-lg">
                                    <i class="fas fa-magic"></i> Generar Mi IA
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- AI Preview -->
                    <div class="ai-preview hidden" id="aiPreviewSection">
                        <div class="ai-preview-header">
                            <i class="fas fa-check-circle"></i>
                            <h3>¡Tu IA está lista!</h3>
                        </div>
                        <div class="ai-preview-content">
                            <p><strong>Comparte este link con tus clientes:</strong></p>
                            <div class="ai-link-display" id="aiLinkDisplay">
                                <!-- Link generado dinámicamente -->
                            </div>
                            <div class="ai-actions" id="aiActions">
                                <!-- Botones generados dinámicamente -->
                            </div>
                        </div>
                    </div>

                    <!-- Chat Test -->
                    <div class="ai-test hidden" id="aiTestSection">
                        <div class="ai-test-header">
                            <h4><i class="fas fa-vial"></i> Probador de IA</h4>
                            <div class="ai-test-status online">
                                <i class="fas fa-circle"></i> Online
                            </div>
                        </div>
                        <div class="chat-container" id="chatContainer">
                            <!-- Mensajes generados dinámicamente -->
                        </div>
                        <div class="chat-input-container">
                            <textarea class="chat-input" id="chatInput" placeholder="Escribe tu mensaje..."></textarea>
                            <button class="btn btn-primary chat-send-btn" id="chatSendBtn">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>

                    <!-- No IA message -->
                    <div class="empty-state" id="noAIMessage">
                        <div class="empty-state-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h3>IA no generada</h3>
                        <p>Completa la información del comercio y agrega algunos productos para generar tu IA</p>
                    </div>
                </div>

                <!-- Tab: Estadísticas -->
                <div class="tab-pane" id="estadisticas">
                    <div class="form-section">
                        <h3><i class="fas fa-chart-line"></i> Estadísticas de Tu IA</h3>
                        <div class="stats-grid" id="statsGrid">
                            <!-- Stats cards generadas dinámicamente -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="app.js"></script>
    <script type="module" src="dashboard.js"></script>
</body>
</html>
